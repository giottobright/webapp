# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Telegram Mini App

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ webapp:
- ‚úÖ –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–µ - –¥–∏–∑–∞–π–Ω –æ–±–Ω–æ–≤–ª–µ–Ω
- ‚ùå –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∏–∑ Telegram Mini App - –¥–∏–∑–∞–π–Ω –≤—Å–µ –µ—â–µ —Å—Ç–∞—Ä—ã–π

**–ü—Ä–∏—á–∏–Ω–∞:** Telegram Mini App –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ –∫—ç—à–∏—Ä—É–µ—Ç `index.html` –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–ë—ã–ª–∏ –≤–Ω–µ—Å–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

### 1. Meta —Ç–µ–≥–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
–í `index.html` –¥–æ–±–∞–≤–ª–µ–Ω—ã:
```html
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

#### –î–ª—è Netlify:
–§–∞–π–ª `netlify.toml` –æ–±–Ω–æ–≤–ª–µ–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏:
- `index.html` - –±–µ–∑ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- `/assets/*` - –¥–æ–ª–≥–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ñ–∞–π–ª—ã —Å —Ö–µ—à–∞–º–∏)

#### –î–ª—è Timeweb Cloud:
–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `nginx-timeweb.conf` —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –¥–ª—è Nginx.

### 3. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤
–í `index.html` –¥–æ–±–∞–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ timestamp –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

## üìã –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Netlify:
1. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
```bash
cd webapp
git add .
git commit -m "fix: –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Telegram Mini App"
git push
```

2. Netlify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã

### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Timeweb Cloud:

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥ Timeweb
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `nginx-timeweb.conf` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞—à–µ–≥–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞
2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ø–∞–Ω–µ–ª–∏ Timeweb

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Docker/Nginx
–ï—Å–ª–∏ webapp —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç —á–µ—Ä–µ–∑ Docker, –¥–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à docker-compose.yml:

```yaml
services:
  webapp:
    image: nginx:alpine
    volumes:
      - ./webapp/dist:/usr/share/nginx/html
      - ./webapp/nginx-timeweb.conf:/etc/nginx/conf.d/default.conf
    ports:
      - "80:80"
```

### –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ Telegram (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ:

1. **–í Telegram Desktop:**
   - –ó–∞–∫—Ä–æ–π—Ç–µ Mini App
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Telegram
   - –û—Ç–∫—Ä–æ–π—Ç–µ Mini App –∑–∞–Ω–æ–≤–æ

2. **–í Telegram Mobile:**
   - –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä–æ–π—Ç–µ Telegram (swipe away)
   - –û—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–Ω–æ–≤–æ
   - –û—Ç–∫—Ä–æ–π—Ç–µ Mini App

3. **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ Mini App
   - –î–æ–±–∞–≤—å—Ç–µ `?v=timestamp` –∫ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://your-app.netlify.app?v=1234567890`)

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ webapp –Ω–∞–ø—Ä—è–º—É—é:**
   ```
   https://your-app.netlify.app
   ```
   - –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –Ω–æ–≤—ã–π –¥–∏–∑–∞–π–Ω ‚úÖ

2. **–û—Ç–∫—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ Telegram:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É Mini App
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∏–∑–∞–π–Ω –æ–±–Ω–æ–≤–∏–ª—Å—è ‚úÖ

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞:**
   ```bash
   curl -I https://your-app.netlify.app/index.html
   ```
   –î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
   ```
   Cache-Control: no-cache, no-store, must-revalidate
   Pragma: no-cache
   Expires: 0
   ```

## üêõ –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏:

1. **–î–æ–±–∞–≤—å—Ç–µ –≤–µ—Ä—Å–∏—é –≤ URL –±–æ—Ç–∞:**
   –í `back/app/config.py` –∏–ª–∏ `back/app/main.py`:
   ```python
   webapp_url = f"{settings.webapp_url}?v={int(time.time())}"
   ```
   –≠—Ç–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–∏—Ç URL –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ.

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Timeweb:**
   - –ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å Timeweb Cloud
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `index.html` –Ω–µ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è

3. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à CDN (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):**
   - –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è CDN, –æ—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - –ò–ª–∏ –ø–æ–¥–æ–∂–¥–∏—Ç–µ TTL (–æ–±—ã—á–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç)

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **Meta —Ç–µ–≥–∏** - —Å–æ–æ–±—â–∞—é—Ç –±—Ä–∞—É–∑–µ—Ä—É –Ω–µ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. **HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏** - —Å–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
3. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ URL —Å–∫—Ä–∏–ø—Ç–∞ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é

### –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã:

- ‚úÖ `webapp/index.html` - –¥–æ–±–∞–≤–ª–µ–Ω—ã meta —Ç–µ–≥–∏ –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ `webapp/netlify.toml` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ `webapp/public/_headers` - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–ª—è Netlify
- ‚úÖ `webapp/nginx-timeweb.conf` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Timeweb

## ‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- ‚úÖ Telegram Mini App –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å–≤–µ–∂—É—é –≤–µ—Ä—Å–∏—é `index.html`
- ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (JS/CSS —Å —Ö–µ—à–∞–º–∏) –±—É–¥—É—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∏–∑–∞–π–Ω–∞ –±—É–¥—É—Ç –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

---

**–î–∞—Ç–∞:** 2025-01-27  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

